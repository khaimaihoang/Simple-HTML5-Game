<!DOCTYPE html>
<html>
<head>
  <title>Clicker Adventure!</title>
  <style>
    </style>
</head>
<body>
  <div class="container">
    <h1>Clicker Adventure!</h1>
    <p>Click the buttons to increase your score!</p>
    <div class="buttons">
      <button onclick="increaseCount(1)">+1</button>
      <button onclick="increaseCount(2)">+2</button>
      <button onclick="increaseCount(3)">+3</button>
    </div>
    <h2 id="count">0</h2>

    <h2>High Score</h2>
    <h3 id="high-score">Loading...</h3>

    <h2>Telegram Chat ID</h2>
    <h3 id="chat-id"></h3>
  </div>

  <script>
    var count = 0;
    var highScore = 0;

    // Function to fetch the high score from the server
    function getHighScore() {
      fetch('/get_high_score')
        .then(response => response.json())
        .then(data => {
          highScore = data.highScore;
          document.getElementById('high-score').innerText = highScore;
        });
    }

    function increaseCount(amount) {
      count += amount;
      document.getElementById('count').innerHTML = count;

      // Check if new score is higher than high score
      if (count > highScore) {
        sendHighScore(count);
      }
    }

    // Function to send the new high score to the server
    function sendHighScore(score) {
      fetch('/set_high_score', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        // Send only the score value as JSON data
        body: JSON.stringify({ 'score': score })
      })
        .then(response => response.json())
        .then(data => {
          console.log(data.message);
        });
    }

    // Call getHighScore on page load
    getHighScore();
  </script>
</body>
</html>
